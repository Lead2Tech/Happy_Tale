    <!-- âœ… Turboç”¨ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼ˆGoogle Mapsé…å»¶å¯¾ç­–ï¼‰ -->
    <script>
      document.addEventListener("turbo:load", () => {
        console.log("âš¡ Turbo load detected from layout");
        setTimeout(() => {
          if (typeof google !== "undefined" && typeof initMap === "function") {
            console.log("ğŸ—ºï¸ Initializing map after Turbo load");
            initMap();
          } else {
            console.warn("âš ï¸ Google Maps not ready, retrying...");
            setTimeout(() => {
              if (typeof google !== "undefined" && typeof initMap === "function") {
                console.log("âœ… Retried initMap successfully");
                initMap();
              }
            }, 1000);
          }
        }, 800);
      });
    </script>

    <!-- ğŸš¨ Google Maps èª­ã¿è¾¼ã¿å¤±æ•—æ™‚ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ -->
    <script>
      window.addEventListener("error", (e) => {
        if (e.target.tagName === "SCRIPT" && e.target.src.includes("maps.googleapis.com")) {
          console.error("âŒ Google Maps ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚APIã‚­ãƒ¼ã‚„ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚");
          const mapDiv = document.getElementById("map");
          if (mapDiv) {
            mapDiv.innerHTML = `
              <p class="text-center text-red-600 mt-6 font-semibold">
                Googleãƒãƒƒãƒ—ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚å†èª­ã¿è¾¼ã¿ã—ã¦ãã ã•ã„ã€‚
              </p>
            `;
          }
        }
      }, true);
    </script>
  </body>
</html>
